{"version":3,"sources":["api/request.ts","api/episode.ts","components/Loader/Loader.tsx","api/poster.ts","components/Poster/Poster.tsx","components/Episode/Episode.tsx","components/Season/Season.tsx","components/Series/Series.tsx","components/AllSeasons/AllSeasons.tsx","App.tsx","index.tsx"],"names":["BASE_URL","request","url","a","options","method","console","log","fetch","response","ok","Promise","reject","status","statusText","json","getAllEpisodes","series","Loader","className","requestPoster","Poster","nameOfSeries","useState","showLoaderPoster","setShowLoaderPoster","urlPoster","setUrlPoster","loadPoster","urlPosterFromServer","useEffect","src","alt","Episode","episode","episode_id","title","season","air_date","characters","episode_id_season","map","character","Season","seasonId","Series","AllSeasons","SetAllSeasons","Object","keys","sort","showLoaderSeasons","setShowLoaderSeasons","allEpisodes","setAllEpisodes","defaultOrderSeries","setDefaultOrderSeries","loadAndPrepareDataFromServer","all","allEpisodesFromServer","errorDataIndex","findIndex","e","preparedAllEpisodes","forEach","push","defaultOrderSeriesFromServer","b","localeCompare","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.420a4049.chunk.js","sourcesContent":["export const BASE_URL = 'https://www.breakingbadapi.com/api';\n\ntype requestOption = {\n  method: string;\n  headers?: {\n    'Content-type': string;\n  };\n  body?: string;\n};\n\nexport const request = async (\n  url: string,\n  options: requestOption = {\n    method: 'GET',\n  },\n) => {\n  // eslint-disable-next-line no-console\n  console.log(`request to: ${BASE_URL}${url}`);\n\n  // eslint-disable-next-line no-console\n  console.log('request options:', options);\n\n  const response = await fetch(`${BASE_URL}${url}`, options);\n\n  if (!response.ok) {\n    // eslint-disable-next-line prefer-promise-reject-errors\n    return Promise.reject(\n      `${response.status} - ${response.statusText}`,\n    );\n  }\n\n  return response.json();\n};\n","import { request } from './request';\nimport episodes from '../data/episodes.json';\nimport episodesBreakingBad from '../data/episodesBreakingBad.json';\nimport episodesBetterCallSaul from '../data/episodesBetterCallSaul.json';\n\nexport const getEpisode = (episodeId: string) => request(`/episodes/${episodeId}`);\n\nexport const getAllEpisodes = (series = '') => {\n  switch (series) {\n    case 'Breaking Bad':\n      return request(\n        '/episodes?series=Breaking+Bad',\n      );\n\n    case 'Better Call Saul':\n      return request(\n        '/episodes?series=Breaking+Bad',\n      );\n\n    default:\n      return request('/episodes/');\n  }\n};\n\nexport const getAllEpisodesBreakingBad = () => request(\n  '/episodes?series=Breaking+Bad',\n);\n\nexport const getAllEpisodesBetterCallSaul = () => request(\n  '/episodes?series=Better+Call+Saul',\n);\n\n// offline:\nexport const getAllEpisodesBreakingBadOffline = () => episodesBreakingBad;\n\nexport const getAllEpisodesBetterCallSaulOffline = () => episodesBetterCallSaul;\n\nexport const getAllEpisodesOffline = (series = '') => {\n  switch (series) {\n    case 'Breaking Bad':\n      return episodesBreakingBad;\n\n    case 'Better Call Saul':\n      return episodesBetterCallSaul;\n\n    default:\n      return episodes;\n  }\n};\n","import React from 'react';\nimport './Loader.scss';\n\nexport const Loader: React.FC = () => (\n  <div className=\"Loader\">\n    <div className=\"Loader__content\" />\n  </div>\n);\n","export const BASE_URL = 'http://www.omdbapi.com';\n\ntype requestOption = {\n  method: string;\n  headers?: {\n    'Content-type': string;\n  };\n  body?: string;\n};\n\nexport const requestPoster = async (\n  url: string,\n  options: requestOption = {\n    method: 'GET',\n  },\n) => {\n  // eslint-disable-next-line no-console\n  console.log(`request to: ${BASE_URL}/?t=${url}&apikey=8327dd52`);\n\n  // eslint-disable-next-line no-console\n  console.log('request options:', options);\n\n  const response = await fetch(`${BASE_URL}/?t=${url}&apikey=8327dd52`);\n\n  if (!response.ok) {\n    // eslint-disable-next-line prefer-promise-reject-errors\n    return Promise.reject(\n      `${response.status} - ${response.statusText}`,\n    );\n  }\n\n  return response.json();\n};\n","import React, {\n  useEffect, useState,\n} from 'react';\nimport { requestPoster } from '../../api/poster';\nimport { Loader } from '../Loader';\nimport './Poster.scss';\n\ntype Props = {\n  nameOfSeries: string;\n};\n\nexport const Poster: React.FC<Props> = ({ nameOfSeries }) => {\n  // eslint-disable-next-line no-console\n  console.log(nameOfSeries);\n  const [showLoaderPoster, setShowLoaderPoster] = useState(false);\n  const [urlPoster, setUrlPoster] = useState('');\n\n  const loadPoster = async () => {\n    setShowLoaderPoster(true);\n\n    try {\n      const urlPosterFromServer = await requestPoster(nameOfSeries);\n\n      setUrlPoster(urlPosterFromServer.Poster);\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.log('error', error);\n    } finally {\n      setShowLoaderPoster(false);\n    }\n  };\n\n  useEffect(() => {\n    loadPoster();\n  },\n  []);\n\n  // eslint-disable-next-line no-console\n  console.log(urlPoster);\n\n  return (\n    <>\n      {showLoaderPoster ? (\n        <Loader />\n      ) : (\n        <div className=\"Poster\">\n          <img src={urlPoster} alt={`poster of ${nameOfSeries}`} />\n        </div>\n      )}\n    </>\n  );\n};\n","import React, { useEffect } from 'react';\nimport './Episode.scss';\n\ntype Props = {\n  episode: EpisodeType;\n};\n\nexport const Episode: React.FC<Props> = ({\n  episode,\n}) => {\n  const {\n    episode_id,\n    title,\n    season,\n    air_date,\n    characters,\n    episode: episode_id_season,\n    // series,\n  } = episode;\n\n  useEffect(() => {\n    // eslint-disable-next-line no-console\n    console.log(episode.series, episode.season, episode.title);\n  },\n  []);\n\n  return (\n    <div className=\"Episode\">\n      <p className=\"Episode__episode_id\">{episode_id}</p>\n      <p className=\"Episode__season\">{`Season: ${season}`}</p>\n      <p className=\"Episode__episode_id_season\">{episode_id_season}</p>\n      <p className=\"Episode__title\">{title}</p>\n      <p className=\"Episode__air_date\">{air_date}</p>\n      <ul className=\"Episode__characters\">\n        {characters.map(character => (\n          <li key={character}>{character}</li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n","import React, {\n  useEffect,\n} from 'react';\nimport { Episode } from '../Episode';\nimport './Season.scss';\n\ntype Props = {\n  seasonId: string;\n  season: EpisodeType[];\n};\n\nexport const Season: React.FC<Props> = ({ season, seasonId }) => {\n  useEffect(() => {\n    // eslint-disable-next-line no-console\n    console.log(`Season ${seasonId} mounted`);\n  },\n  []);\n\n  return (\n    <div className=\"Season\">\n      <h3>{`Season ${seasonId}`}</h3>\n      <ul className=\"SeasonList\">\n        {season.map((episode: EpisodeType) => (\n          <li\n            key={episode.episode_id}\n            className=\"SeasonItem\"\n          >\n            <Episode episode={episode} />\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n","import React, {\n  useEffect, useState,\n} from 'react';\nimport { Poster } from '../Poster';\nimport { Season } from '../Season';\nimport './Series.scss';\n\ntype Props = {\n  nameOfSeries: string;\n  series: {[key: string]: EpisodeType[]};\n};\n\nexport const Series: React.FC<Props> = ({\n  nameOfSeries,\n  series,\n}) => {\n  const [AllSeasons, SetAllSeasons] = useState<string[] | null>(null);\n\n  useEffect(() => {\n    SetAllSeasons(Object.keys(series).sort());\n  },\n  []);\n\n  return (\n    <div\n      className=\"Series\"\n    >\n      <h2>{nameOfSeries}</h2>\n\n      <Poster nameOfSeries={nameOfSeries} />\n\n      <ul className=\"SeriesList\">\n        {AllSeasons\n        && AllSeasons.map((seasonId: string) => (\n          <li\n            key={seasonId}\n            className=\"SeriesItem\"\n          >\n            <Season\n              seasonId={seasonId}\n              season={series[seasonId]}\n            />\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n","import React, { useEffect, useState } from 'react';\nimport {\n  getAllEpisodes,\n  // getAllEpisodesOffline,\n} from '../../api/episode';\nimport { Loader } from '../Loader';\nimport { Series } from '../Series';\nimport './AllSeasons.scss';\n\nexport const AllSeasons: React.FC = () => {\n  const [showLoaderSeasons, setShowLoaderSeasons] = useState(false);\n  const [allEpisodes, setAllEpisodes] = useState<AllEpisodes | null>(null);\n  const [defaultOrderSeries, setDefaultOrderSeries] = useState<string[] | null>(null);\n\n  const loadAndPrepareDataFromServer = async () => {\n    setShowLoaderSeasons(true);\n\n    try {\n      // LOAD DATA\n      const [\n        allEpisodesFromServer,\n      ] = await Promise.all([\n        // if online\n        getAllEpisodes(),\n\n        // if offline:\n        // getAllEpisodesOffline(),\n      ]);\n\n      // PREPARE DATA\n      // #region changeMistake in episode{episode_id: 7, season: ' 1'}\n      const errorDataIndex = allEpisodesFromServer\n        .findIndex((e: EpisodeType) => e.season === ' 1');\n\n      allEpisodesFromServer[errorDataIndex].season = '1';\n      // #endregion ChangeMistake\n\n      const preparedAllEpisodes: AllEpisodes = {};\n\n      allEpisodesFromServer.forEach((episode: EpisodeType) => {\n        if (!preparedAllEpisodes[episode.series]) {\n          preparedAllEpisodes[episode.series] = {};\n        }\n\n        if (!preparedAllEpisodes[episode.series][episode.season]) {\n          preparedAllEpisodes[episode.series][episode.season] = [episode];\n        } else {\n          preparedAllEpisodes[episode.series][episode.season].push(episode);\n        }\n      });\n\n      setAllEpisodes(preparedAllEpisodes);\n\n      // sort rule is modifiable\n      const defaultOrderSeriesFromServer = Object.keys(preparedAllEpisodes)\n        .sort((a, b) => -a.localeCompare(b));\n\n      setDefaultOrderSeries(defaultOrderSeriesFromServer);\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.log('error', error);\n    } finally {\n      setShowLoaderSeasons(false);\n    }\n  };\n\n  useEffect(() => {\n    loadAndPrepareDataFromServer();\n  },\n  []);\n\n  return (\n    <>\n      {showLoaderSeasons\n        ? (\n          <Loader />\n        ) : (\n          <div className=\"AllSeasons\">\n            <ul className=\"AllSeasonsList\">\n              {allEpisodes && defaultOrderSeries\n              && defaultOrderSeries.map(nameOfSeries => (\n                <li\n                  className=\"AllSeasonsItem\"\n                  key={nameOfSeries}\n                >\n                  <Series\n                    nameOfSeries={nameOfSeries}\n                    series={allEpisodes[nameOfSeries]}\n                  />\n                </li>\n              ))}\n            </ul>\n          </div>\n        )}\n    </>\n  );\n};\n","import React from 'react';\nimport './App.scss';\nimport { AllSeasons } from './components/AllSeasons';\n\nexport const App: React.FC = () => {\n  return (\n    <div className=\"starter\">\n      <AllSeasons />\n    </div>\n  );\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport { App } from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}