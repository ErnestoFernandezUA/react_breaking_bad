{"version":3,"sources":["api/request.ts","api/episode.ts","components/Loader/Loader.tsx","api/poster.ts","components/Poster/Poster.tsx","components/Episode/Episode.tsx","components/Season/Season.tsx","components/Series/Series.tsx","components/AllSeasons/AllSeasons.tsx","App.tsx","index.tsx"],"names":["BASE_URL","request","url","a","options","method","console","log","fetch","response","ok","Promise","reject","status","statusText","json","getAllEpisodes","series","Loader","className","requestPoster","Poster","nameOfSeries","useState","urlPoster","setUrlPoster","loadPoster","urlPosterFromServer","useEffect","src","alt","Episode","episode","episode_id","title","season","air_date","characters","episode_id_season","map","character","Season","seasonId","Series","AllSeasons","SetAllSeasons","Object","keys","sort","showLoaderSeasons","setShowLoaderSeasons","allEpisodes","setAllEpisodes","defaultOrderSeries","setDefaultOrderSeries","loadAndPrepareDataFromServer","all","allEpisodesFromServer","errorDataIndex","findIndex","e","preparedAllEpisodes","forEach","push","defaultOrderSeriesFromServer","b","localeCompare","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e4c5e1d4.chunk.js","sourcesContent":["export const BASE_URL = 'https://www.breakingbadapi.com/api';\n\ntype requestOption = {\n  method: string;\n  headers?: {\n    'Content-type': string;\n  };\n  body?: string;\n};\n\nexport const request = async (\n  url: string,\n  options: requestOption = {\n    method: 'GET',\n  },\n) => {\n  // eslint-disable-next-line no-console\n  console.log(`request to: ${BASE_URL}${url}`);\n\n  // eslint-disable-next-line no-console\n  console.log('request options:', options);\n\n  const response = await fetch(`${BASE_URL}${url}`, options);\n\n  if (!response.ok) {\n    // eslint-disable-next-line prefer-promise-reject-errors\n    return Promise.reject(\n      `${response.status} - ${response.statusText}`,\n    );\n  }\n\n  return response.json();\n};\n","import { request } from './request';\nimport episodes from '../data/episodes.json';\nimport episodesBreakingBad from '../data/episodesBreakingBad.json';\nimport episodesBetterCallSaul from '../data/episodesBetterCallSaul.json';\n\nexport const getEpisode = (episodeId: string) => request(`/episodes/${episodeId}`);\n\nexport const getAllEpisodes = (series = '') => {\n  switch (series) {\n    case 'Breaking Bad':\n      return request(\n        '/episodes?series=Breaking+Bad',\n      );\n\n    case 'Better Call Saul':\n      return request(\n        '/episodes?series=Breaking+Bad',\n      );\n\n    default:\n      return request('/episodes/');\n  }\n};\n\nexport const getAllEpisodesBreakingBad = () => request(\n  '/episodes?series=Breaking+Bad',\n);\n\nexport const getAllEpisodesBetterCallSaul = () => request(\n  '/episodes?series=Better+Call+Saul',\n);\n\n// offline:\nexport const getAllEpisodesBreakingBadOffline = () => episodesBreakingBad;\n\nexport const getAllEpisodesBetterCallSaulOffline = () => episodesBetterCallSaul;\n\nexport const getAllEpisodesOffline = (series = '') => {\n  switch (series) {\n    case 'Breaking Bad':\n      return episodesBreakingBad;\n\n    case 'Better Call Saul':\n      return episodesBetterCallSaul;\n\n    default:\n      return episodes;\n  }\n};\n","import React from 'react';\nimport './Loader.scss';\n\nexport const Loader: React.FC = () => (\n  <div className=\"Loader\">\n    <div className=\"Loader__content\" />\n  </div>\n);\n","export const BASE_URL = 'http://www.omdbapi.com';\n\ntype requestOption = {\n  method: string;\n  headers?: {\n    'Content-type': string;\n  };\n  body?: string;\n};\n\nexport const requestPoster = async (\n  url: string,\n  options: requestOption = {\n    method: 'GET',\n  },\n) => {\n  // eslint-disable-next-line no-console\n  console.log(`request to: ${BASE_URL}/?t=${url}&apikey=8327dd52`);\n\n  // eslint-disable-next-line no-console\n  console.log('request options:', options);\n\n  const response = await fetch(`${BASE_URL}/?t=${url}&apikey=8327dd52`);\n\n  if (!response.ok) {\n    // eslint-disable-next-line prefer-promise-reject-errors\n    return Promise.reject(\n      `${response.status} - ${response.statusText}`,\n    );\n  }\n\n  return response.json();\n};\n","import React, {\n  useEffect, useState,\n} from 'react';\nimport { requestPoster } from '../../api/poster';\nimport './Poster.scss';\n\ntype Props = {\n  nameOfSeries: string;\n};\n\nexport const Poster: React.FC<Props> = ({ nameOfSeries }) => {\n  // eslint-disable-next-line no-console\n  console.log(nameOfSeries);\n\n  const [urlPoster, setUrlPoster] = useState<string | null>(null);\n\n  const loadPoster = async () => {\n    const urlPosterFromServer = await requestPoster(nameOfSeries);\n\n    setUrlPoster(urlPosterFromServer.Poster);\n  };\n\n  useEffect(() => {\n    loadPoster();\n  },\n  []);\n\n  // eslint-disable-next-line no-console\n  console.log(urlPoster);\n\n  return (\n    <div className=\"Poster\">\n      {urlPoster\n      && <img src={urlPoster} alt=\"poster\" />}\n    </div>\n  );\n};\n","import React, { useEffect } from 'react';\nimport './Episode.scss';\n\ntype Props = {\n  episode: EpisodeType;\n};\n\nexport const Episode: React.FC<Props> = ({\n  episode,\n}) => {\n  const {\n    episode_id,\n    title,\n    season,\n    air_date,\n    characters,\n    episode: episode_id_season,\n    // series,\n  } = episode;\n\n  useEffect(() => {\n    // eslint-disable-next-line no-console\n    console.log(episode.series, episode.season, episode.title);\n  },\n  []);\n\n  return (\n    <div className=\"Episode\">\n      <p className=\"Episode__episode_id\">{episode_id}</p>\n      <p className=\"Episode__season\">{`Season: ${season}`}</p>\n      <p className=\"Episode__episode_id_season\">{episode_id_season}</p>\n      <p className=\"Episode__title\">{title}</p>\n      <p className=\"Episode__air_date\">{air_date}</p>\n      <ul className=\"Episode__characters\">\n        {characters.map(character => (\n          <li key={character}>{character}</li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n","import React, {\n  useEffect,\n} from 'react';\nimport { Episode } from '../Episode';\nimport './Season.scss';\n\ntype Props = {\n  seasonId: string;\n  season: EpisodeType[];\n};\n\nexport const Season: React.FC<Props> = ({ season, seasonId }) => {\n  useEffect(() => {\n    // eslint-disable-next-line no-console\n    console.log(`Season ${seasonId} mounted`);\n  },\n  []);\n\n  return (\n    <div className=\"Season\">\n      <h3>{`Season ${seasonId}`}</h3>\n      <ul className=\"SeasonList\">\n        {season.map((episode: EpisodeType) => (\n          <li\n            key={episode.episode_id}\n            className=\"SeasonItem\"\n          >\n            <Episode episode={episode} />\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n","import React, {\n  useEffect, useState,\n} from 'react';\nimport { Poster } from '../Poster';\nimport { Season } from '../Season';\nimport './Series.scss';\n\ntype Props = {\n  nameOfSeries: string;\n  series: {[key: string]: EpisodeType[]};\n};\n\nexport const Series: React.FC<Props> = ({\n  nameOfSeries,\n  series,\n}) => {\n  const [AllSeasons, SetAllSeasons] = useState<string[] | null>(null);\n\n  useEffect(() => {\n    SetAllSeasons(Object.keys(series).sort());\n  },\n  []);\n\n  return (\n    <div className=\"Series\">\n      <h2>{nameOfSeries}</h2>\n\n      <Poster nameOfSeries={nameOfSeries} />\n\n      <ul className=\"SeriesList\">\n        {AllSeasons\n        && AllSeasons.map((seasonId: string) => (\n          <li\n            key={seasonId}\n            className=\"SeriesItem\"\n          >\n            <Season\n              seasonId={seasonId}\n              season={series[seasonId]}\n            />\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n","import React, { useEffect, useState } from 'react';\nimport {\n  getAllEpisodes,\n  // getAllEpisodesOffline,\n} from '../../api/episode';\nimport { Loader } from '../Loader';\nimport { Series } from '../Series';\nimport './AllSeasons.scss';\n\nexport const AllSeasons: React.FC = () => {\n  const [showLoaderSeasons, setShowLoaderSeasons] = useState(false);\n  const [allEpisodes, setAllEpisodes] = useState<AllEpisodes | null>(null);\n  const [defaultOrderSeries, setDefaultOrderSeries] = useState<string[] | null>(null);\n\n  const loadAndPrepareDataFromServer = async () => {\n    setShowLoaderSeasons(true);\n\n    try {\n      // LOAD DATA\n      const [\n        allEpisodesFromServer,\n      ] = await Promise.all([\n        // if online\n        getAllEpisodes(),\n\n        // if offline:\n        // getAllEpisodesOffline(),\n      ]);\n\n      // PREPARE DATA\n      // #region changeMistake in episode{episode_id: 7, season: ' 1'}\n      const errorDataIndex = allEpisodesFromServer\n        .findIndex((e: EpisodeType) => e.season === ' 1');\n\n      allEpisodesFromServer[errorDataIndex].season = '1';\n      // #endregion ChangeMistake\n\n      const preparedAllEpisodes: AllEpisodes = {};\n\n      allEpisodesFromServer.forEach((episode: EpisodeType) => {\n        if (!preparedAllEpisodes[episode.series]) {\n          preparedAllEpisodes[episode.series] = {};\n        }\n\n        if (!preparedAllEpisodes[episode.series][episode.season]) {\n          preparedAllEpisodes[episode.series][episode.season] = [episode];\n        } else {\n          preparedAllEpisodes[episode.series][episode.season].push(episode);\n        }\n      });\n\n      setAllEpisodes(preparedAllEpisodes);\n\n      // sort rule is modifiable\n      const defaultOrderSeriesFromServer = Object.keys(preparedAllEpisodes)\n        .sort((a, b) => -a.localeCompare(b));\n\n      setDefaultOrderSeries(defaultOrderSeriesFromServer);\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.log('error', error);\n    } finally {\n      setShowLoaderSeasons(false);\n    }\n  };\n\n  useEffect(() => {\n    loadAndPrepareDataFromServer();\n  },\n  []);\n\n  return (\n    <>\n      {showLoaderSeasons\n        ? (\n          <Loader />\n        ) : (\n          <div className=\"AllSeasons\">\n            <ul className=\"AllSeasonsList\">\n              {allEpisodes && defaultOrderSeries\n              && defaultOrderSeries.map(nameOfSeries => (\n                <li\n                  className=\"AllSeasonsItem\"\n                  key={nameOfSeries}\n                >\n                  <Series\n                    nameOfSeries={nameOfSeries}\n                    series={allEpisodes[nameOfSeries]}\n                  />\n                </li>\n              ))}\n            </ul>\n          </div>\n        )}\n    </>\n  );\n};\n","import React from 'react';\nimport './App.scss';\nimport { AllSeasons } from './components/AllSeasons';\n\nexport const App: React.FC = () => {\n  return (\n    <div className=\"starter\">\n      <AllSeasons />\n    </div>\n  );\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport { App } from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}